pipeline {
	agent { label 'x64' }
	tools {
		maven 'Maven 3.6.2'
		jdk 'Java 8'
	}
	stages {
		stage ('Test') {
			steps {
				bat "mvn clean -Dthreads=${threads} -Dremote=${remote} -DseleniumGridURL=${gridURL} verify"
				junit '**/target/failsafe-reports/TEST-*.xml'
			}
		}
		stage ('Archive') {
			steps {
				archiveArtifacts artifacts: 'target/selenium-logs/*.log', onlyIfSuccessful: false, fingerprint: true
			}
		}
	}
}
